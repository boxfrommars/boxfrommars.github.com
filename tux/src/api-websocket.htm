<!DOCTYPE html>
<html lang="en">

include "parts/head.htm"

<body>

<!-- Wrap all page content here -->
<div id="wrap">

    <!-- Fixed navbar -->
    include "parts/navbar.htm"

    <!-- Begin page content -->
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <div class="page-header">
                    <h1>WebSocket API</h1>
                </div>
                Ниже описаны сообщения, отправляемые сервером о протоколу Websocket

                <h2 class="anchored" id="js-href-general">Общий вид</h2>
                <table class="table table-bordered table-striped">
                    <tbody>
                    <tr>
                        <td><code>type</code></td>
                        <td><code>string</code> Тип сообщения (действия), один из типов перечисленных ниже</td>
                    </tr>
                    <tr>
                        <td><code>data</code></td>
                        <td><code>{}</code> Объект, данные нужные клиенту для дальнейших действий</td>
                    </tr>
                    </tbody>
                </table>
<pre class="code">
include "websocket-api/template.json"
</pre>
                <h4 class="anchored" id="js-href-types">Типы сообщения</h4>
                <table class="table table-bordered table-striped">
                    <tbody>
                    <tr>
                        <td><code>order</code></td>
                        <td>Уведомляем клиент о необходимости открыть заказ</td>
                    </tr>
                    <tr>
                        <td><code>update-dictionary</code></td>
                        <td>Уведомление об обновлении списка словарей</td>
                    </tr>
                    <tr>
                        <td><code>refresh-application</code></td>
                        <td>Уведомление о необходимости обновить код клиентского приложение (обновить страницу в браузере, т.к. изменился js-код, если доступным языком)</td>
                    </tr>
                    <tr>
                        <td><code>message</code></td>
                        <td>Уведомление о новом сообщении</td>
                    </tr>
                    <tr>
                        <td><code>shift</code></td>
                        <td>Уведомление об открытии смены</td>
                    </tr>
                    </tbody>
                </table>

                <p>Далее будет описываться только часть <code>data</code> сообщений</p>

                <h4 class="anchored" id="js-href-type-order">Уведомление о заказе</h4>
                <table class="table table-bordered table-striped">
                    <tbody>
                    <tr>
                        <td><code>id</code></td>
                        <td>Идентификатор заказа</td>
                    </tr>
                    </tbody>
                </table>
<pre class="code">
include "websocket-api/order.json"
</pre>

                <h4 class="anchored" id="js-href-type-update-dictionary">Уведомление об обновлении списка словарей</h4>
<pre class="code">
include "websocket-api/update-dictionary.json"
</pre>

                <h4 class="anchored" id="js-href-type-refresh-application">Уведомление о необходимости обновить код клиентского приложение</h4>
<pre class="code">
include "websocket-api/refresh-application.json"
</pre>

                <h4 class="anchored" id="js-href-type-message">Уведомление о новом сообщении</h4>
                <table class="table table-bordered table-striped">
                    <tbody>
                    <tr>
                        <td><code>id</code></td>
                        <td>Идентификатор треда</td>
                    </tr>
                    </tbody>
                </table>
<pre class="code">
include "websocket-api/message.json"
</pre>

                <h4 class="anchored" id="js-href-type-shift">Уведомление об открытии смены</h4>
                <table class="table table-bordered table-striped">
                    <tbody>
                    <tr>
                        <td><code>id</code></td>
                        <td>Идентификатор запроса на открытие смены</td>
                    </tr>
                    </tbody>
                </table>
<pre class="code">
include "websocket-api/shift.json"
</pre>


                include "parts/disqus.htm"
            </div>

            <div class="col-md-3 hidden-xs hidden-sm sidebar-column">
                <div data-spy="affix" data-offset-top="40" data-offset-bottom="200" class="sidebar-affix">
                    <ul class="nav bs-sidenav">
                        <li class="">
                            <a href="#js-href-general">Общий вид</a>
                            <a href="#js-href-types">Типы сообщений</a>
                            <a href="#js-href-type-order">Заказ</a>
                            <a href="#js-href-type-update-dictionary">Обновление словарей</a>
                            <a href="#js-href-type-refresh-application">Обновление</a>
                            <a href="#js-href-type-message">Сообщение</a>
                            <a href="#js-href-type-shift">Смена</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div id="push"></div>
</div>

include "parts/footer.htm"

</body>
</html>