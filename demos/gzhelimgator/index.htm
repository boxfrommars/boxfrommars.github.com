<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>gzhelimgator demo</title>
        <meta name="author" content="Dmitry Groza">
        <script src="gzhelimgator.js"></script>
        <style>
            body {
                margin: 20px;
            }
            canvas {
                border: 1px solid #ccc;
                margin: 10px;
                cursor: pointer;
                display: inline;
            }
        </style>
    </head>
    
    <body>
        
        <canvas id="img-gallery" width="400" height="250"></canvas>
        <canvas id="img-gallery-stripes" width="600" height="250"></canvas>
        <div id="img-view"></div>
        
        <script>
            /**
             * генерирует картинки по заданным размерам, 
             * количество картинок (cnt) может быть больше, чем размер массива, тогда будут картинки с одинаковыми размерами
             * 
             * @param int cnt количество генерируемых картинок ()
             * @param [[int width, int height]] vfccbd hfpvthjd
             * 
             * @return [string imgSrc]
             */
            var dummyImageGenerator = function(cnt, sizes){
                var urlPattern = 'http://flickholdr.com/%width%/%height%';
                var imgs = [];
                
                for (var i = 0; i < cnt; i++) {
                    imgs.push(
                        urlPattern.replace('%width%', sizes[i % sizes.length][0])
                                  .replace('%height%', sizes[i % sizes.length][1])
                    );
                }
                return imgs;
            }
            
            // http://javascript.ru/Math.random
            var getRandomIntegerBetween = function(min, max) {
                return (Math.floor(Math.random() * (max - min + 1)) + min);
            }
            
            var dummySizeGenerator = function(min, max, scale, length) {
                var sizes = [];
                for (var i = 0; i < length; i++) {
                    sizes.push([
                        getRandomIntegerBetween(min, max) * scale, 
                        getRandomIntegerBetween(min, max) * scale
                    ]);
                }
                return sizes;
            }
            
            
            
            
            
            var imageViewContainer = document.getElementById('img-view');
            var layout = [
                    {
                        size: {width: 200, height: 250}, 
                        position: {x: 0, y: 0}
                    },
                    {
                        size: {width: 200, height: 125}, 
                        position: {x: 200, y: 0}
                    },
                    {
                        size: {width: 200, height: 125}, 
                        position: {x: 200, y: 125}
                    }
                ]
            
            var imgs = dummyImageGenerator(10, dummySizeGenerator(4, 20, 50, 10));
            var gallery = new Gzhelimgator(document.getElementById('img-gallery'), imgs, layout, 2000, function(e, block){
                imageViewContainer.innerHTML = '';
                imageViewContainer.appendChild(block.image);
            });
            
            var layoutStripes = [
                    {
                        size: {width: 100, height: 250}, 
                        position: {x: 0, y: 0}
                    },
                    {
                        size: {width: 100, height: 250}, 
                        position: {x: 100, y: 0}
                    },
                    {
                        size: {width: 100, height: 250}, 
                        position: {x: 200, y: 0}
                    },
                    {
                        size: {width: 100, height: 250}, 
                        position: {x: 300, y: 0}
                    },
                    {
                        size: {width: 100, height: 250}, 
                        position: {x: 400, y: 0}
                    },
                    {
                        size: {width: 100, height: 250}, 
                        position: {x: 500, y: 0}
                    },
                ]    
                
            // stripes
            var imgsStripes = dummyImageGenerator(10, dummySizeGenerator(4, 20, 50, 10));
            var galleryStripes = new Gzhelimgator(document.getElementById('img-gallery-stripes'), imgsStripes, layoutStripes, 1000, function(e, block){
                imageViewContainer.innerHTML = '';
                imageViewContainer.appendChild(block.image);
            }, 'slide');
            
        </script>
    </body>
</html>
